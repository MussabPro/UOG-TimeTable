<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UOG Timetable</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background-color: #f9f9f9;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 15px;
        text-align: center;
        vertical-align: middle;
      }
      th {
        background-color: #f5f5f5;
        color: #333;
        font-weight: bold;
      }
      .day-cell {
        background-color: #e9e9e9;
        font-weight: bold;
        width: 100px;
        color: #333;
      }
      .time-header {
        background-color: #f0f0f0;
        color: #333;
        min-width: 120px;
      }
      .course-info {
        background-color: white;
        min-height: 80px;
        padding: 10px;
      }
      .course-title {
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
        font-size: 14px;
      }
      .course-code {
        color: #666;
        font-size: 12px;
        margin-bottom: 5px;
      }
      .instructor {
        color: #333;
        font-size: 12px;
        margin-bottom: 5px;
      }
      .room {
        color: #666;
        font-size: 11px;
        font-weight: bold;
      }
      .empty-cell {
        background-color: #f8f8f8;
      }
      .input-section {
        margin-bottom: 30px;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
      }
      .input-section textarea {
        width: 100%;
        height: 200px;
        padding: 10px;
        font-family: monospace;
        font-size: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        resize: vertical;
      }
      .input-section button {
        margin-top: 10px;
        padding: 10px 20px;
        background-color: #333;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
      }
      .input-section button:hover {
        background-color: #555;
      }
      .input-section label {
        display: block;
        margin-bottom: 10px;
        font-weight: bold;
        color: #333;
      }
      .action-buttons {
        margin-top: 20px;
        text-align: center;
        display: none;
      }
      .action-buttons button {
        margin: 0 10px;
        padding: 12px 24px;
        background-color: #333;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
      }
      .action-buttons button:hover {
        background-color: #555;
      }
      @media print {
        body {
          margin: 0;
          padding: 0;
          background-color: white;
        }
        .container {
          max-width: none;
          margin: 0;
          padding: 10px;
          box-shadow: none;
        }
        .input-section,
        .action-buttons {
          display: none !important;
        }
        h1 {
          margin-bottom: 20px;
          font-size: 24px;
        }
        table {
          width: 100%;
          margin: 0;
          font-size: 12px;
        }
        th,
        td {
          padding: 8px;
          border: 1px solid #000;
        }
        .course-title {
          font-size: 11px;
        }
        .course-code,
        .instructor,
        .room {
          font-size: 10px;
        }
      }
      @page {
        size: landscape;
        margin: 0.5in;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>UOG Timetable</h1>

      <div class="input-section">
        <label for="courseData"
          >Enter Course Data (Course Code, Section, Course Title, Cr. Hrs.,
          Instructor, Lecture Day, Lecture Time, Room):</label
        >
        <textarea
          id="courseData"
          placeholder="Paste your course data here...
Example:
CS-255	EB	Computer Organization and Assembly Language	3	Muhammad Jabbar	MON	13:30-15:00	B205
CS-203	EB	Data Structures	4	Muhammad Tasaddaq Latif	MON	16:30-18:00	B013A"
        ></textarea>
        <button onclick="generateTimetable()">Generate Timetable</button>
      </div>

      <table id="timetableTable" style="display: none"></table>

      <div class="action-buttons" id="actionButtons">
        <button onclick="printTimetable()">üñ®Ô∏è Print Timetable</button>
        <button onclick="downloadTimetable()">üì• Download PDF</button>
      </div>
    </div>

    <script>
      function generateTimetable() {
        const courseData = document.getElementById("courseData").value.trim();
        if (!courseData) {
          alert("Please enter course data");
          return;
        }

        const lines = courseData.split("\n").filter((line) => line.trim());
        const courses = [];

        lines.forEach((line) => {
          const parts = line.split("\t");
          if (parts.length >= 8) {
            courses.push({
              code: parts[0],
              section: parts[1],
              title: parts[2],
              credits: parts[3],
              instructor: parts[4],
              day: parts[5],
              time: parts[6],
              room: parts[7],
            });
          }
        });

        // Create timetable structure
        const timetable = {
          MON: {},
          TUE: {},
          WED: {},
          THU: {},
          FRI: {},
        };

        const timeSlots = {
          "13:30-15:00": "1:30-3:00 PM",
          "15:00-16:30": "3:00-4:30 PM",
          "16:30-18:00": "4:30-6:00 PM",
          "18:00-19:30": "6:00-7:30 PM",
        };

        // Populate timetable
        courses.forEach((course) => {
          const day = course.day;
          const time = course.time;
          if (timetable[day] && timeSlots[time]) {
            timetable[day][time] = course;
          }
        });

        // Generate table HTML
        let tableHTML = `
          <thead>
            <tr>
              <th>Day</th>
              <th class="time-header">1:30-3:00 PM</th>
              <th class="time-header">3:00-4:30 PM</th>
              <th class="time-header">4:30-6:00 PM</th>
              <th class="time-header">6:00-7:30 PM</th>
            </tr>
          </thead>
          <tbody>`;

        const days = ["MON", "TUE", "WED", "THU", "FRI"];
        const times = [
          "13:30-15:00",
          "15:00-16:30",
          "16:30-18:00",
          "18:00-19:30",
        ];

        days.forEach((day) => {
          tableHTML += `<tr><td class="day-cell">${day}</td>`;

          times.forEach((time) => {
            const course = timetable[day][time];
            if (course) {
              // Format room number with dash
              let room = course.room;
              if (room.match(/^B\d+[A-Z]?$/)) {
                room = room.replace(/^B(\d+)([A-Z]?)$/, "B-$1$2");
              }

              tableHTML += `
                <td class="course-info">
                  <div class="course-title">${course.title}</div>
                  <div class="course-code">${course.code}</div>
                  <div class="instructor">${course.instructor}</div>
                  <div class="room">${room}</div>
                </td>`;
            } else {
              tableHTML += `<td class="empty-cell"></td>`;
            }
          });

          tableHTML += "</tr>";
        });

        tableHTML += "</tbody>";
        document.getElementById("timetableTable").innerHTML = tableHTML;
        document.getElementById("timetableTable").style.display = "table";
        document.getElementById("actionButtons").style.display = "block";
      }

      function printTimetable() {
        window.print();
      }

      function downloadTimetable() {
        window.print();
      }

      // Initialize with empty textarea
      window.onload = function () {
        document.getElementById("courseData").value = "";
      };
    </script>
  </body>
</html>
